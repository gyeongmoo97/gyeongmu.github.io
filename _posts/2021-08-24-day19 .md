---
title: Day19
layout: single
author_profile: true
read_time: true
comments: true
share: true
related: true
categories:
- DB
description: .

meta_keywords: java,static,memory
last_modified_at: '2021-08-10 12:00:00 +0800'
toc: true
toc_sticky: false
toc_label: 목차
---







# BOM



자바스크립트는 싱글스레드 로 구성된다.

그래서 다른방법으로 주기적으로 실행되는 무언가를 만들 수 있다.



## setInterval(), setTimeout()

매개값으로 함수가 들어가면 그 함수는 call back 함수임

| [setInterval()](https://www.w3schools.com/jsref/met_win_setinterval.asp) | Calls a function or evaluates an expression at specified intervals (in milliseconds) |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| [setTimeout()](https://www.w3schools.com/jsref/met_win_settimeout.asp) | msec 단위로 실행, 특정 시간이 지나면 자동실행, 타이머 같이 사용가능. |



```
setTimeout(function(){ alert("Hello"); }, 3000);
//자바 스크립트는 매개값으로 함수가 많이 들어감.
//특정 조건이 되면 매개값에 포함된 함수가 callback 됨.
//callback ->명시적 호출이 아닌 알아서 실행해주는것
```

### setTimeout() 타이머

setTimeout(*function, milliseconds, param1, param2, ...*)

| Parameter             | Description                       |
| :-------------------- | :-------------------------------- |
| *function*            | callback할 함수                   |
| *milliseconds         | 실행까지 지정시간                 |
| *param1, param2, ...* | callback 함수가 사용하는 매개변수 |

| Return Value: | A Number, representing the ID value of the timer that is set. Use this value with the clearTimeout() method to cancel the timer |
| :------------ | ------------------------------------------------------------ |
|               | return 되는 값 값은 숫자형의 ID 이다. 이 ID를 cleearInterval(ID)로 그 타이머를 cancel 할 수 있다. |

 

return 값을 변수에 저장하여

그 변수에 clearInterval을 해주면 

타이머를 멈출 수 있다.





```html
<script>
    let timerId;

    function setAlarm(){
      let time = document.getElementById("time").value;
      time = parseInt(time);
      time *=1000;

      timerId = window.setTimeout(() =>{
        window.alert("시간이 되었습니다.")
      },time);

      

    }
    function setCancel(){
      clearTimeout(timerId);
    }
  </script>
</head>

<body>
  <div class="card m-5">
    <div class="card-header">
      setTimeout
    </div>
    <div class="card-body">
      <input type="text" id="time"/>초
      <button class = "btn btn-info btn-sm" onclick="setAlarm()">알람 설정</button>
      <button class = "btn btn-info btn-sm" onclick="setCancel()">알람 취소</button>
     
    </div>
  
  </div>
  
</body>
```





### setInteval() 반복

setInterval(*function, milliseconds, param1, param2, ...*)

| Parameter             | Description                                                  |
| :-------------------- | :----------------------------------------------------------- |
| *function*            | callback                                                     |
| *milliseconds*        | msec 단위로 반복실행   10이하의 값은 10으로 간주 즉 최소 100분의 1초 단위로 실행가능 |
| *param1, param2, ...* | callback 의 매개 변수 값                                     |

| Return Value: | A Number, representing the ID value of the timer that is set. Use this value with the clearInterval() method to cancel the timer |
| :------------ | ------------------------------------------------------------ |
|               | return 되는 값 값은 숫자형의 ID 이다. 이 ID를 cleearInterval(ID)로 그 타이머를 cancel 할 수 있다. |

return 값을 변수에 저장하여

그 변수에 clearInterval을 해주면 

타이머를 멈출 수 있다.

```html
 <script>
    function init(){
      var clock = document.getElementById("clock");
      window.setInterval(() => {
        clock.innerHTML = new Date().toLocaleTimeString();
      },1000);
     
    }
    // var clockDiv= document.getElementById("clock");
    //이걸 제일 먼저 실행하면 오류가남, 
    let stopwatchId;
    function startStopWatch(){
      let count =0;
      
      var stopWatch = document.getElementById("stopWatch");
      let mSec = 0;
        let sec = 0;
        let min = 0;
        let hour = 0;

        stopwatchId = window.setInterval(() => {
        // const now = new Date();
        // const  hour = now.getHours();
        // const minute = now.getMinutes();
        // const second = now.getSecond();
        // const mileSecond = now.getMileSecond();
        // const time = hour +":"+minute+":"+second +":"+mileSecond;

      //   count++;
      //  let mSec = count;
      //   let sec = "0";
      //   let min = "0";
      //   let hour = "0";

        mSec++;
        if(mSec ===100){
          sec++;
          mSec =0;
        }
        if(sec ===60){
          min ++;
          sec=0;
        }
        if(min ===60){
          hour ++;
          min=0;
        }


        const time = hour +":"+min+":"+sec +":"+mSec;
        stopWatch.innerHTML = time;
      },10);
      //10 이하의 값은 설정이 안됨.
    }

    function stopStopWatch(){
      clearInterval(stopwatchId);
    }

  </script>
</head>

<body onload="init()">
  <div class="card">
    <div class="card-header">
      setInterval
    </div>
    <div class="card-body">
      <button class = "btn btn-info btn-sm" onclick="startStopWatch()">스톱워치 시작</button>
      <button class = "btn btn-info btn-sm"onclick="stopStopWatch()">스톱워치 멈춤</button>
    <hr>
    <div> 현재시간 :<span id="clock"></span></div>
    <div> 스톱워치 :<span id="stopWatch"></span></div>
    <div id="clock">  </div>
    <div id="display"></div>
    </div>
  
  </div>
</body>
```



![image-20210824094752751](C:\Users\mwe22\AppData\Roaming\Typora\typora-user-images\image-20210824094752751.png)

![image-20210824094921560](C:\Users\mwe22\AppData\Roaming\Typora\typora-user-images\image-20210824094921560.png)

![image-20210824092612138](C:\Users\mwe22\AppData\Roaming\Typora\typora-user-images\image-20210824092612138.png)





### 활용

이러한 setInterval()은 게임등 동적인 컨텐츠를 구성할때 이미지를 계속해서 수정해줄 수 있다.

setInterval 의 time 값으로 게임에서 화면을 draw 하는 주기 즉 fps를 결정 할 수 있다.

일반적으로 화면이 25~30 fps 가 나와야 자연스럽다.





# 자투리

![image](https://user-images.githubusercontent.com/65274952/130536863-6cb58574-12b4-4451-a8d2-3ee5d5f78253.png)

이런식으로 코드를 짜면 안된다.

위에서 아래로 해석하는데 

참조할 대상이 선언되지 않은 상태에서 호출하면안된다.



```html
<body onload="init()">
```

활용해서 로드가 맨 앞의 script여도 맨마지막에 실행가능

즉 지연실행가능



![image-20210824093828738](C:\Users\mwe22\AppData\Roaming\Typora\typora-user-images\image-20210824093828738.png)



