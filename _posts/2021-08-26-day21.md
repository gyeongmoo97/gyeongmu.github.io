---
title: Day21 
layout: single
author_profile: true
read_time: true
comments: true
share: true
related: true
categories:
- DB
description: .

meta_keywords: java,static,memory
last_modified_at: '2021-08-10 12:00:00 +0800'
toc: true
toc_sticky: false
toc_label: 목차
---



# 개발환경 설정

![image](https://user-images.githubusercontent.com/65274952/130880011-57a44a61-397d-4726-8476-6b0e730891e5.png)

![image](https://user-images.githubusercontent.com/65274952/130880025-77b101d9-9ad1-4450-912e-a477f37de814.png)

default 값은 그대로 두고 설정한 값만 

나중에 프로젝트에 적용시키면 된다.

![image](https://user-images.githubusercontent.com/65274952/130880418-ca062b53-e553-422c-b4eb-add9255011d9.png)

![image](https://user-images.githubusercontent.com/65274952/130880496-0c005bd2-5f5a-4f76-b17e-0a3429b39279.png)
remove
![image](https://user-images.githubusercontent.com/65274952/130880513-9ae3f0bf-6036-4fed-b21c-a30c4cb3e4b4.png)
![image](https://user-images.githubusercontent.com/65274952/130880539-4977f8cc-7403-40c5-a30d-ace6c5540d6a.png)
![image](https://user-images.githubusercontent.com/65274952/130880568-186427df-8c39-4e56-a608-1b61edf08f6f.png)
![image](https://user-images.githubusercontent.com/65274952/130880582-91e84681-02f7-4714-87e9-fa03e7169953.png)
![image](https://user-images.githubusercontent.com/65274952/130880643-5cacf37d-045e-4b95-8c82-5b31578c9d41.png)
현업에서는 1.7쓰는 경우도 있다.
![image](https://user-images.githubusercontent.com/65274952/130880698-8696c420-7eac-4372-ad69-4e22919f0918.png)

섭서블릿 spec 과 java 버전 변경 4
![image](https://user-images.githubusercontent.com/65274952/130880722-62890c66-5f8b-499d-9ee6-bcb748315bc6.png)
![image](https://user-images.githubusercontent.com/65274952/130880735-ef5a4f3d-900a-4303-9f0e-335e0c084627.png)


스팩은 2.5에서 40으로 올렸는데 기존문서는 그대로임
![image](https://user-images.githubusercontent.com/65274952/130880772-0f37e861-e99b-41d4-9120-d518f59b8918.png)

web.xml 이름변경
![image](https://user-images.githubusercontent.com/65274952/130880819-f57d84ef-f86b-42dd-8bd0-5b0888f8fac1.png)

이름 변경하니 4.0으로 버전 상승
![image](https://user-images.githubusercontent.com/65274952/130880862-8f5378ef-58c0-445a-bc91-d93c15e53ec2.png)

web.xml  기존문서는 버전이 2.5로 되어있음
![image](https://user-images.githubusercontent.com/65274952/130880985-8646ee86-74ff-45e1-b4ff-cdbf116bb206.png)



![image](https://user-images.githubusercontent.com/65274952/130880935-10ec6b7b-25d3-47db-8423-f242a1ac52c5.png)
아래 버튼 누르면 설정에 맞는 web.xml 
![image](https://user-images.githubusercontent.com/65274952/130881222-012a748c-0d71-4dad-9518-b96e5e44ec0f.png)

pom
![image](https://user-images.githubusercontent.com/65274952/130881305-d111e645-09fe-41b8-84ee-9acf3cf0551c.png)

![image](https://user-images.githubusercontent.com/65274952/130881412-724fff29-f224-4748-a095-cb234a51ed56.png)

![image](https://user-images.githubusercontent.com/65274952/130881501-5456e0e8-4f89-48e2-a42d-40820864aa7f.png)

디버그 ? 할때 메소드 이름도 출력하라는 내용
![image](https://user-images.githubusercontent.com/65274952/130881811-80954f5d-d644-44f3-a4a8-abed72944afd.png)



기존 xml

```xml
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://java.sun.com/xml/ns/javaee https://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

	<!-- The definition of the Root Spring Container shared by all Servlets and Filters -->
	<context-param>
		<param-name>contextConfigLocation</param-name>
		<param-value>/WEB-INF/spring/root-context.xml</param-value>
	</context-param>
	
	<!-- Creates the Spring Container shared by all Servlets and Filters -->
	<listener>
		<listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
	</listener>

	<!-- Processes application requests -->
	<servlet>
		<servlet-name>appServlet</servlet-name>
		<servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
		<init-param>
			<param-name>contextConfigLocation</param-name>
			<param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
		</init-param>
		<load-on-startup>1</load-on-startup>
	</servlet>
		
	<servlet-mapping>
		<servlet-name>appServlet</servlet-name>
		<url-pattern>/</url-pattern>
	</servlet-mapping>

</web-app>

```



# 출력설정



```xml
<param name="ConversionPattern" value="%-5p: %c.%M() - %m%n" />
```



![image](https://user-images.githubusercontent.com/65274952/130882186-c63e6f40-e453-4fc2-be24-4dafcfe3ea42.png)





![image](https://user-images.githubusercontent.com/65274952/130882235-8c839888-4c70-4d6b-9b02-fec3e751e6b6.png)

was 안에는 하나의 어플리케이션만 실행할 수 있는게 아니라 여러가지 어플리케이션이 동시실행가능하다.

![image](https://user-images.githubusercontent.com/65274952/130882275-5ed52272-e743-4b6e-b5e2-8629aeb2f16a.png)

브라우저가 webapp 이라는 어플리케이션 사용하고싶으면?

호스트명, 포트번호,어플리케이션식별자로 webapp 찾아갈 수 있다.

같은 was 면 같은 포트를 사용한다

![image](https://user-images.githubusercontent.com/65274952/130882396-0ba0ce31-2779-432c-a95f-876d98570ade.png)

여기서 webapp1, webapp2 같이 어떤 어플리케이션인지 구분해주는 식별자를

Context Root 라고 한다. (어플리케이션이 context 임)

![image](https://user-images.githubusercontent.com/65274952/130882464-d11e8e37-b266-4870-be80-d08052bf7320.png)



프로젝트 이름과 tomcat에서 사용하는 context는 다를 수 있다. 

그런데 지금은 왜 default로 webapp일까? 

-> package 만들때 가장 마지막 이름을 기준으로 context root 만들기 때문



pom.xml 보면

![image](https://user-images.githubusercontent.com/65274952/130882594-702deffe-dbf9-49f9-8176-6cefa8e14cf9.png)

package를 쪼개서 들어간 걸 알 수 있다.

 

![image](https://user-images.githubusercontent.com/65274952/130882778-f0e9874f-e603-42ec-ab22-fe70fa4d95e0.png)

webapp 이라는 것을 노출시키고 싶지 않다. 

-> context root 변경해야함

![image](https://user-images.githubusercontent.com/65274952/130882837-02463f5b-c81f-483b-8bad-815207c0600b.png)
![image](https://user-images.githubusercontent.com/65274952/130882849-8cfcd426-fd90-4991-bf9b-d8106b8baea3.png)

서버를 삭제하고 다시 설치 해줘야한다



재시작 하면 

![image](https://user-images.githubusercontent.com/65274952/130883708-4cca3026-fcbd-44d5-a044-80c25d2f6513.png)

webapp 없어진 것 볼 수 있다.



# pom.xml 메이븐의 설정 파일

프로젝트의 빌드과정이 pom.xml 에서 설정하게 되어있음

메이븐이 빌드 할 때 pom.xml 을 보고 빌드함

overview 로 보면 아래와 같다.



![image](https://user-images.githubusercontent.com/65274952/130884269-c56d322a-b793-45a8-a344-089b58862112.png)

version 에 대해 기록가능하고

pakaging은 개발 후 최종 산출물이 war로 나온다는 이야기임



## pom의 구성요소

![image](https://user-images.githubusercontent.com/65274952/130885226-e53fef3e-c543-417f-b46b-565cb21a33d9.png)



## packaging

![image](https://user-images.githubusercontent.com/65274952/130884426-b6704fcb-b185-42e0-8110-5520df7929c9.png)

![image](https://user-images.githubusercontent.com/65274952/130884481-eeef0c83-daf0-43b0-b6f1-d3ba237276fb.png)
![image](https://user-images.githubusercontent.com/65274952/130884514-e299bd4c-5a00-481d-85f9-5beab36eef5e.png)

근데 ㅁ인식이 안된건지 나는 war 안생김 위의 war 는 내것이 아님



dependencies 메인으로 사용하는 라이브러리
![image](https://user-images.githubusercontent.com/65274952/130884703-6d84768f-47d4-4d9c-88e0-47e16a4e74f2.png)
dependencies hierarchy 메인 라이브러리를 위해 필요한 라이브러리 (라이브러리의 라이브러리) 프로젝트를 위해 필요한 전체 라이브러리가 여기에 포함된다.

프로젝트 실행중 특정 라이브러리에 문제가 생기거나 없다거나 하면 여기서 추가가능
![image](https://user-images.githubusercontent.com/65274952/130884751-76dc7d2e-e4b8-4083-91c5-d67ecaece09a.png)

## Effective POM 

메이븐이 빌드하기 위해 필요한 정보

![image](https://user-images.githubusercontent.com/65274952/130885054-3c905cc1-4006-493c-be73-275665344659.png)

프로젝트별 설정 내용 + 공통 설정 내용 => effective pom



## 메이븐 저장소

![image](https://user-images.githubusercontent.com/65274952/130885604-2489d9b0-8230-41f1-a3bc-091ca4a58305.png)

url  태그 뒤에 오는 주소에서 라이브러리를 받는다.



만약 사내 원격 저장소가 있어서 그것으로 받아야 한다 -> 

```xml
 <repositories>
    <repository>
      <snapshots>
        <enabled>false</enabled>
      </snapshots>
      <id>central</id>
      <name>Central Repository</name>
      <url>https://repo.maven.apache.org/maven2</url>
    </repository>
  </repositories>

```

이부분을 pom.xml 에 삽입하는데
url 위치에 사내저장소의 주소를 넣으면 된다.
나중에 effetive POM에 자동 반영됨.



![image](https://user-images.githubusercontent.com/65274952/130885955-a430ef1a-4763-4a73-b1f1-9786514883b6.png)

기본적으로 다운받은 라이브러리는 로컬저장소에  저장되고 

그것을 프로젝트에서 사용한다

l기본 경로: <USER_HOME>/.m2/repository

![image](https://user-images.githubusercontent.com/65274952/130886049-d5f9f8c0-2090-445b-95eb-6f9b5593c08a.png)

로컬 저장소에소 프로젝트 저장되기 때문에 프로젝트의 사이즈가 그렇게 커지지 않는다.



## dependency

프로젝트의 필요 라이브러리 기술

```xml
<dependency>
			<groupId>org.aspectj</groupId>
			<artifactId>aspectjrt</artifactId>
			<version>${org.aspectj-version}</version>
		</dependency>	
```



## properties

일종의 변수

자주 사용하는 값을 변수 이름으로 대치가능



```xml
<properties>
		<java-version>1.8</java-version>
		<org.springframework-version>5.3.8</org.springframework-version>
		<org.aspectj-version>1.9.7</org.aspectj-version>
		<org.slf4j-version>1.7.30</org.slf4j-version>
	</properties>
.
.
.
<version>${org.springframework-version}</version>

```

버전이 바뀌게 되어도 변수에 들어가는 값만 바꾸면 나머지는 바꿀 필요가 없음.

# spring 의 버전 선택

https://github.com/spring-projects/spring-framework/wiki/Spring-Framework-Versions

1. jdk 를 기준으로 대략적인 version  (major version)정해짐
2. major version 의 기능을 살펴보고 필요한 기능이 있는 version 고른다.

![image](https://user-images.githubusercontent.com/65274952/130886874-3bc62d63-78a8-4b46-94ac-8f353c0d3ce7.png)

x버전은 업데이트를 한 버전 update version 

보통은 안정화가 x 가늘어날 수록 많이 진행된 버전임



[https://spring.io/projects/spring-framework#learn](https://spring.io/projects/spring-framework)

주요 버전에 대한 설명이 있는 사이트임

레퍼런스와 api doc가 있는 사이트다.



## spring Framework의 모듈 종류

https://github.com/spring-projects/spring-framework/wiki/Spring-Framework-Artifacts

 ![image](https://user-images.githubusercontent.com/65274952/130887543-694011aa-925d-4d9d-bbcb-8ce9b6bfc152.png)

종류가 많은데 필요에 따라 xml 에 의존성 추가해서 가져와서 쓸 수 있다.



![image](https://user-images.githubusercontent.com/65274952/130887572-63599531-9983-48d9-b58e-2dd3369573fb.png)

지금은 일단 2개만 의존성 설정했지만 

의존의 의존이 로드 되면서 많아짐



# 문자 인코딩 필터 설정

![image](https://user-images.githubusercontent.com/65274952/130888033-47c6b6a1-c2ab-418b-bb42-0d186d1c9a14.png)



```xml
<!-- 문자 인코딩 필터 설정 -->
	<filter>
		<filter-name>encodingFilter</filter-name>
		<filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
		<init-param>
			<param-name>encoding</param-name>
			<param-value>UTF-8</param-value>
		</init-param>
	</filter>
	<filter-mapping>
		<filter-name>encodingFilter</filter-name>
		<url-pattern>/*</url-pattern>
	</filter-mapping>
```



