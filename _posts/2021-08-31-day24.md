

---
title: Day23 코드분석(작성중)
layout: single
author_profile: true
read_time: true
comments: true
share: true
related: true
categories:

- DB
description: .

meta_keywords: java,static,memory
last_modified_at: '2021-08-10 12:00:00 +0800'
toc: true
toc_sticky: false
toc_label: 목차
---

 {% raw %}

# web xml

배치기술자

spring의 요소를 어디에 어떻게 배치하는지를 기술한다.



web.xml은 스프링의 주요한 규칙,설정을 담고있는 파일인 servlet, root context-context.xml의 위치도 담고있다.

![image](https://user-images.githubusercontent.com/65274952/131421148-878f523d-9ea8-436c-b152-38b79b07e7a5.png)

![image](https://user-images.githubusercontent.com/65274952/131421170-f2d30f96-789e-4955-a394-3ece86d8c323.png)



resource 에 배치하는것 보다 src/main/resources에 위치하는게 전자정부프로젝트에서 일반적이다.

옮기기위해 변경함 classpath: 는 classes가 저장되는경로인 

```xml
<context-param>
    <param-name>contextConfigLocation</param-name>
    <!-- 	<param-value>/WEB-INF/spring/root-context.xml</param-value> -->
    <param-value>classpath:spring/root/*.xml</param-value>
</context-param>

<!-- Creates the Spring Container shared by all Servlets and Filters -->
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<!-- Processes application requests -->
<servlet>
    <servlet-name>appServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <!-- 			<param-value>/WEB-INF/spring/appServlet/*.xml</param-value> -->
        <param-value>classpath:spring/appServlet/*.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

```

![image](https://user-images.githubusercontent.com/65274952/131422283-fd01f096-0b34-477b-8094-124d37d2ec95.png)

모두 classapath에 있으면 관리하기가 편리하다








![image](https://user-images.githubusercontent.com/65274952/131422482-ddf7be6b-38ab-45e6-ac1c-34540f9d446d.png)

최종산출물에서 classes 에 꼭 java 만들어가는게 아니다 클래스를 실행하기위해 필요한 것이 다 들어간다.

message 도 들어간다.

```
ch04_error_en.properties
ch04_error_ko.properties
```

브라우저가 사용하는 언어에 맞게 스프링이 알아서 파일을 선택한다.

구분자는

**ch04_error**_ko.properties

**ch04_error** 

까지 이다.

## 접미사가 없는 message



![image](https://user-images.githubusercontent.com/65274952/131422681-1f11c0bb-03b5-44e9-a2a0-c8591eeb95fb.png)

위의 상황에서 한국도 영어도 아닌 언어가 오면 언어에 대한 접미사가 없는파일을 사용한다.



## message 와 Spring연결

root context xml로 연결





xml의 구조 (root context xml)

```xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans https://www.springframework.org/schema/beans/spring-beans.xsd">
	
	<!-- Root Context: defines shared resources visible to all other web components -->
		
</beans>

```

xml 시작부분은 인코딩 방식과 버전을 나타낸다.



아래 최초로나타내는 것은 root 태그이다. 

bean, property는후에 자세히 다룬다.



```xml
	   <!-- 에러 및 국제화 메시지를 위한 ResourceBundleMessageSource 관리빈 등록  -->
   <bean id="messageSource"
      class="org.springframework.context.support.ResourceBundleMessageSource">   
      <property name="basenames">
         <list>
            <value>message.ch04_error</value>
         </list>
      </property>
      <property name="defaultEncoding" value="UTF-8"/>
   </bean>   
```



```xml
  <value>message.ch04_error</value>
```

기본경로가 classpath 이기 때문에 messager를 web-inf에 넣으면안된다.

message 아래의 ch04_error 중 언어에 맞는것을 뽑아준다.



```xml
  <bean id="messageSource" class="org.springframework.context.support.ResourceBundleMessageSource">   
```

이 class를 통해서 메시지를 스프링에 전달? 후에 더 자세히 다룬다.





# @Valid(폼 유효성 검사 요구)를 사용하기 위한 의존성 설정(pom.xml)

mvn repository

https://mvnrepository.com/artifact/javax.validation/validation-api/2.0.1.Final

![image](https://user-images.githubusercontent.com/65274952/131423486-9d0b928c-0951-4ba3-ac93-0517ed15a599.png)

2.01final

```xml
<dependency>
    <groupId>javax.validation</groupId>
    <artifactId>validation-api</artifactId>
    <version>2.0.1.Final</version>
</dependency>
```



![image](https://user-images.githubusercontent.com/65274952/131423655-d6ea3467-9d6b-478e-81ac-a9b2bc698959.png)

종속성 추가하면 로컬저장소인 .m2 폴더에 라이브러리가 추가된다.



# validator 클래스 작성



## 폼단위

한개의 폼에서만 사용함. 폼당 하나씩 만듦, 로그인페이지 1개, 회원가입페이지 1개, 배송지 입력 1개 이런식

## 필드단위

아이디 비밀번호 이메일 등등 많이 들어가면 각각 만들어야한다.

그런데 중복으로 사용하면 필드단위가 이득이다.

예를들어 아이디를 여러번 입력할 일이 있다면 필드단위에서는 중복코드가 줄어든다.





 {% endraw %}